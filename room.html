<!doctype html>
<title>Waiting Room</title>

<!-- Loading  nodeGame libraries and CSS -->
<script src="/socket.io/socket.io.js"></script> 
<script src="/javascripts/nodegame-full.js" charset="utf-8"></script>
<link rel='stylesheet' href='/stylesheets/player.css'></link>
<!-- end -->

<!-- Loading the Ultimatum game -->
<script src="./Chat.js" charset="utf-8"></script>
<script src="./pr.wait.js" charset="utf-8"></script>


<!-- end -->

<body>
<div id="root">
  <h2 id="h2title">Please be patient. We are waiting for all the players to connect<span id="wait">...</span></h2>
</div>
<script>
  window.onload = function () {
	  

		oo = node.widgets.append('Chat', document.body, {
			mode: 'RECEIVER_ONLY',
			displayName: function() {
				return 'Experimenter';
			}
		});
	
	 
	  (function(){
		  var wait = document.getElementById('wait');
		  setInterval(function(){
		    if (wait.innerHTML !== '.....') {
		      wait.innerHTML = wait.innerHTML + '.';  
		    }
		    else {
		      wait.innerHTML = '..';
		    }
		  }, 1000)    
		})();
	  
	   // Player ID from Mturk
	   var mtid = JSUS.getQueryString('id');
	  
		// Create the Client
			
		 var conf = {
			name: "P_" + Math.floor(Math.random()*100),
			url: "/pr/wait",
			verbosity: 100,
      io: {        
           reconnect: false
      },
      window: {
    	  promptOnleave: false,
      },
      player: {
          mtid: mtid,
      },
		};

		
    node.play(conf, new pr_wait());
    
	  
    
	}
</script>
</body>
